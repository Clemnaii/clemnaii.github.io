# ç½‘ç»œåŒæ­¥åŸºç¡€

---

> ä»¥ä¸‹å†…å®¹åŸºäºUE4

æœåŠ¡å™¨ç»´æŠ¤ç€æ¸¸æˆåœºæ™¯ä¸­çš„æ‰€æœ‰å¯¹è±¡ï¼ˆè§’è‰²ã€ç‰©å“ã€ç¯å¢ƒç­‰ç­‰ï¼‰ï¼Œæ¯ä¸ªå®¢æˆ·ç«¯éƒ½ä¼šå¯¹è¿™äº›å¯¹è±¡è¿›è¡Œä¸€ä¸ªæ‹·è´ï¼ŒæœåŠ¡å™¨ä¼šå®æ—¶å°†å¯¹è±¡çš„æ–°çŠ¶æ€é€šè¿‡`bReplicates`åŒæ­¥æœºåˆ¶æ›´æ–°æ¯ä¸ªå®¢æˆ·ç«¯çš„å¯¹è±¡çš„çŠ¶æ€**ï¼ˆçœŸå®çŠ¶æ€-->æœ¬åœ°çŠ¶æ€ï¼‰**ï¼›å½“å®¢æˆ·ç«¯éœ€è¦æ›´æ–°æŸä¸ªå¯¹è±¡æ—¶ï¼ˆå‰æå®ƒå…·æœ‰å¯¹è¿™ä¸ªå¯¹è±¡çš„æ§åˆ¶æƒï¼‰ï¼Œå®¢æˆ·ç«¯ä¼šé€šè¿‡`RPC`è®¿é—®æœåŠ¡å™¨ï¼Œä»¤æœåŠ¡å™¨åœ¨æœåŠ¡å™¨ç«¯æ›´æ–°è¯¥å¯¹è±¡çš„çŠ¶æ€ï¼ŒæœåŠ¡å™¨å†æŠŠæ–°çŠ¶æ€é€šçŸ¥å„ä¸ªå®¢æˆ·ç«¯è¿›è¡Œæ›´æ–°**ï¼ˆæœ¬åœ°çŠ¶æ€-->çœŸå®çŠ¶æ€-->æœ¬åœ°çŠ¶æ€ï¼‰**ã€‚

---

## ä¸€ã€åŒæ­¥çš„æµç¨‹

1. **æœåŠ¡ç«¯æ˜¯æƒå¨ï¼ˆAuthorityï¼‰**ï¼Œ
    æ‰€æœ‰çš„ `Actor`ã€`ç»„ä»¶` çš„çœŸæ­£çŠ¶æ€éƒ½åªåœ¨æœåŠ¡ç«¯ç»´æŠ¤ä¸€ä»½â€œçœŸå®æ•°æ®â€ã€‚

2. **å®¢æˆ·ç«¯çœ‹åˆ°çš„æ˜¯è¿™äº› Actor çš„â€œå‰¯æœ¬â€**ï¼Œ
    è¿™äº›å‰¯æœ¬é€šè¿‡ **`bReplicates = true`** å®ç°çš„ç½‘ç»œåŒæ­¥ï¼Œä»æœåŠ¡ç«¯å‘è¿‡æ¥ã€‚

3. **è¿™äº›å¤åˆ¶æ˜¯â€œåªè¯»çš„â€å‰¯æœ¬**ï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼‰ï¼š

   - å®¢æˆ·ç«¯ä¸èƒ½ç›´æ¥ä¿®æ”¹å¤åˆ¶æ¥çš„ Actor çŠ¶æ€ã€‚
   - ä½ åœ¨å®¢æˆ·ç«¯ä¿®æ”¹å˜é‡å¹¶ä¸ä¼šåé¦ˆå›æœåŠ¡å™¨ã€‚

4. **åªæœ‰â€œæ‹¥æœ‰æ§åˆ¶æƒâ€çš„å®¢æˆ·ç«¯å¯ä»¥å‘ RPC æŒ‡ä»¤**ï¼ˆæ¯”å¦‚æŒ‰é”®è®©è§’è‰²ç§»åŠ¨ï¼‰ï¼š

   - å®¢æˆ·ç«¯ä¸èƒ½ç›´æ¥æ”¹ Actorï¼Œåªèƒ½é€šè¿‡ **`UFUNCTION(Server)`** çš„æ–¹å¼å‘Šè¯‰æœåŠ¡å™¨ï¼š**æˆ‘è¦è®©æŸä¸ª Actor åšæŸäº‹**ã€‚
   - æœåŠ¡ç«¯æ‰§è¡Œå®Œè¿™ä¸ªè¡Œä¸ºåï¼Œä¼šé€šè¿‡ `Replicated` æˆ– `Multicast` åŒæ­¥ç»™å…¶ä»–å®¢æˆ·ç«¯ã€‚

5. æ‰€ä»¥ï¼š

   > å®¢æˆ·ç«¯ä¸æ˜¯çœŸçš„â€œæ§åˆ¶â€äº† Actorï¼Œåªæ˜¯é€šè¿‡ **RPC å‘æœåŠ¡ç«¯æå‡ºâ€œè¯·æ±‚â€**ï¼Œ
   >  ç„¶åæœåŠ¡ç«¯æ”¹æ•°æ®ã€å¤„ç†é€»è¾‘ï¼Œå†æŠŠç»“æœåŒæ­¥ç»™å®¢æˆ·ç«¯ã€‚

---

## äºŒã€ä¸¾ä¾‹

ä½ æŒ‰äº†â€œå¼€ç«â€ï¼š

- **å®¢æˆ·ç«¯æ“ä½œ**ï¼š

  ```clike
  MyCharacter->ServerFire(); // è°ƒç”¨ä¸€ä¸ªRPC: UFUNCTION(Server, Reliable)
  ```

- **æœåŠ¡ç«¯å“åº”**ï¼š

  ```clike
  void AMyCharacter::ServerFire_Implementation()
  {
      SpawnProjectile();
      // ç„¶åå¯èƒ½å†ç”¨ Multicast é€šçŸ¥æ‰€æœ‰å®¢æˆ·ç«¯æ’­æ”¾å¼€ç«åŠ¨ç”»
      ...
  }
  ```

- **å®¢æˆ·ç«¯æ¥æ”¶åˆ°æœåŠ¡ç«¯å‘æ¥çš„æ›´æ–°**ï¼Œæ¯”å¦‚æ–°çš„å­å¼¹ã€è§’è‰²å§¿æ€ç­‰ã€‚

<br>

**ğŸ“¢æ€»ç»“**

> æœåŠ¡ç«¯ç»´æŠ¤äº†æ‰€æœ‰ Actor çš„çœŸå®çŠ¶æ€ï¼Œå®¢æˆ·ç«¯é€šè¿‡ `bReplicates` è·å–å‰¯æœ¬ï¼›
>  å®¢æˆ·ç«¯åªèƒ½æ§åˆ¶ **å®ƒè¢«æˆæƒæ§åˆ¶çš„ Actor**ï¼Œæ§åˆ¶æ˜¯é€šè¿‡è°ƒç”¨ `Server RPC` æ¥è¯·æ±‚æœåŠ¡ç«¯æ‰§è¡Œæ“ä½œï¼›
>  æœåŠ¡ç«¯å†å°†æ“ä½œç»“æœé€šè¿‡ç½‘ç»œå¤åˆ¶ï¼ˆReplicated æˆ– Multicastï¼‰åŒæ­¥ç»™æ‰€æœ‰å®¢æˆ·ç«¯ã€‚