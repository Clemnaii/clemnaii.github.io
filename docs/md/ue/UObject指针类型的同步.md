# UObject指针类型的同步

---

> 1.在对象的 `Replicated` 属性同步中，有可能某个`actor`类需要同步的属性是一个`UObject*`类型
>
> 2.在RPC调用过程中，RPC函数的参数可能是一个`UObject*`类型

面对这两种情况，都会出现传递一个 `UObject*` 指针，但是我们很显然**不能在网络连接中直接发送内存地址**（每台机器都不一样），所以 UE 使用 `FNetworkGUID` 来代表这个对象。

- `FNetworkGUID` 是 Unreal Engine 的一个**网络唯一标识符（Global Unique Identifier）**，用于在网络同步过程中标记一个对象（特别是 `UObject`）的身份。

- 客户端/服务端收到 `FNetworkGUID` 后，会在本地查找是否有这个对象，有就转换成本地的 `UObject*` 指针。
- 这个机制保证了即使在不同机器上，也可以**准确找到“相同对象”**的引用。

---

**1.哪些对象可以通过网络同步引用**

Unreal 并不是所有的 `UObject` 都能被正确同步引用，它需要一定的前提。总结如下：

✅ 以下情况可以保证同步引用成功：

| 类型                                | 条件                                                         |
| ----------------------------------- | ------------------------------------------------------------ |
| **Actor**                           | `bReplicates = true`（可被复制）                             |
| **未复制的 Actor**                  | 从地图加载（level 中静态放置的） = 具有“可靠命名”            |
| **组件（Component）**               | 被复制，或者来自 Construction Script / C++ 构造函数添加，或者手动 `SetNetAddressable()` |
| **其他 UObject（非 Actor / 组件）** | 必须也是从数据包直接加载（比如地图文件中的资源）             |

---

**2.总结**

**RPC 传参**或**Replicated 属性中使用 UObject\* 指针**，务必保证这些对象满足上述条件，否则客户端将无法识别。